<section class="py-5">
  <div class="container">

    <h2 class="mb-4">コミュニティフォーラム選択</h2>
    <% if @forums.present? %>
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th scope="col">フォーラム名</th>
              <th scope="col">説明</th>
              <th scope="col" class="text-end">トピック数</th>
            </tr>
          </thead>
          <tbody>

            <% @forums.each do |forum| %>
              <!-- tr に position-relative を付ける（Bootstrap のユーティリティクラス） -->
              <tr class="position-relative">
                <td class="align-middle">
                  <!-- visible link に stretched-link を付けると行全体がクリック可能になる -->
                  <%= link_to forum_topics_path(forum), class: 'stretched-link text-decoration-none text-reset', aria: { label: "#{forum.title} のトピック一覧へ" } do %>
                    <strong><%= h forum.title %></strong>
                  <% end %>
                </td>

                <td class="align-middle text-truncate" style="max-width:50ch;">
                  <%= h(truncate(forum.description.to_s, length: 200)) %>
                </td>

                <td class="align-middle text-end">
                  <span class="badge bg-secondary"><%= h(forum.actual_topics_count) %></span>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

    <% else %>
      <div class="alert alert-warning">
        コミュニティが見つかりませんでした。
      </div>
    <% end %>

    <div class="mt-4">
      <%= link_to 'トップに戻る', root_path, class: 'btn btn-link' %>
    </div>
  </div>
</section>
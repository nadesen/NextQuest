<li class="list-group-item">
  <div class="d-flex justify-content-between">
    <div>
      <% if post.respond_to?(:user) && post.user.present? %>
        <%= link_to h(post.author_name), user_path(post.user), class: "fw-bold" %>
      <% elsif post.respond_to?(:creator) && post.creator.present? %>
        <%= link_to h(post.author_name), user_path(post.creator), class: "fw-bold" %>
      <% elsif post.respond_to?(:author) && post.author.present? %>
        <%= link_to h(post.author_name), user_path(post.author), class: "fw-bold" %>
      <% else %>
        <strong><%= h(post.author_name) %></strong>
      <% end %>
      <small class="text-muted ms-2"><%= post.created_at.in_time_zone(Time.zone).strftime('%Y/%m/%d %H:%M') %></small>
    </div>

    <div class="text-end">
      <%# 削除ボタンは投稿の作成者または admin のみ表示 %>
      <% if current_user && (
            (post.respond_to?(:creator) && post.creator == current_user) ||
            (post.respond_to?(:creator_id) && post.creator_id == current_user.id) ||
            (post.respond_to?(:user) && post.user == current_user) ||
            (post.respond_to?(:user_id) && post.user_id == current_user.id) ||
            (current_user.respond_to?(:admin?) && current_user.admin?)
          ) %>

        <%= button_to '削除',
                      forum_topic_post_path(post.topic.forum, post.topic, post),
                      method: :delete,
                      data: { confirm: '本当に削除しますか？' },
                      class: 'btn btn-sm btn-outline-danger' %>
      <% end %>
    </div>
  </div>

  <div class="mt-2 text-white">
    <%= simple_format(h(post.content || post.body || '')) %>
  </div>
</li>
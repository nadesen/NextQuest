<li class="list-group-item">
  <div class="d-flex justify-content-between">
    <div>
      <strong><%= h(post.creator&.nickname.presence || post.user&.nickname.presence || '匿名') %></strong>
      <small class="text-muted ms-2"><%= post.created_at.strftime('%Y/%m/%d %H:%M') %></small>
    </div>

    <div class="text-end">
      <%# 削除ボタンは投稿の作成者のみ表示（編集ボタンは削除） %>
      <% if current_user && (
            (post.respond_to?(:creator_id) && post.creator_id == current_user.id) ||
            (post.respond_to?(:user) && post.user == current_user)
          ) %>

        <%= form_with url: forum_topic_post_path(post.topic.forum, post.topic, post), method: :delete, local: true, html: { class: 'd-inline' } do %>
          <%= submit_tag '削除', data: { confirm: '本当に削除しますか？' }, class: 'btn btn-sm btn-outline-danger' %>
        <% end %>
      <% end %>
    </div>
  </div>

  <div class="mt-2">
    <%= simple_format(h(post.content || post.body || '')) %>
  </div>
</li>